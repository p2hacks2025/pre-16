[{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\app\\actions\\sentiment.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\app\\sns\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\app\\sns\\page.tsx:46:7\n  44 |     const stored = localStorage.getItem(\"hanabi_sound_enabled\");\n  45 |     if (stored === \"true\") {\n> 46 |       setSoundEnabled(true);\n     |       ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  47 |     } else {\n  48 |       setSoundEnabled(false);\n  49 |       if (stored === null) {","line":46,"column":7,"nodeType":null,"endLine":46,"endColumn":22},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":169,"column":17,"nodeType":"JSXOpeningElement","endLine":173,"endColumn":19},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nC:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\app\\sns\\page.tsx:295:16\n  293 |                 HANABI\n  294 |               </Link>\n> 295 |               <VolumeToggleButton />\n      |                ^^^^^^^^^^^^^^^^^^ This component is created during render\n  296 |             </div>\n  297 |           </div>\n  298 |\n\nC:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\app\\sns\\page.tsx:63:30\n  61 |   };\n  62 |\n> 63 |   const VolumeToggleButton = ({ className = \"\" }: { className?: string }) => (\n     |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 64 |     <button\n     | ^^^^^^^^^^^\n> 65 |       type=\"button\"\n     ‚Ä¶\n     | ^^^^^^^^^^^\n> 75 |     </button>\n     | ^^^^^^^^^^^\n> 76 |   );\n     | ^^^^ The component is created during render here\n  77 |\n  78 |   // Show loading state while checking auth\n  79 |   if (loading) {","line":295,"column":16,"nodeType":null,"endLine":295,"endColumn":34}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { Sidebar } from \"@/components/Social/Sidebar\";\r\n\r\nimport { SocialTab } from \"@/components/Social/SocialTab\";\r\nimport { CreatePost } from \"@/components/Social/CreatePost\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { Login } from \"@/components/Login\";\r\nimport { Volume2, VolumeX, X } from \"lucide-react\";\r\n\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { ProfileSettings } from \"@/components/ProfileSettings\";\r\nimport { useProfile } from \"@/hooks/useProfile\";\r\nimport { PostCard, PostData } from \"@/components/Social/PostCard\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\n\r\nexport default function CommunityPage() {\r\n  const [activeTab, setActiveTab] = useState<\"everyone\" | \"solo\">(\"everyone\");\r\n  const [showLoginPrompt, setShowLoginPrompt] = useState(false);\r\n  const [showCompose, setShowCompose] = useState(false);\r\n  const [soundEnabled, setSoundEnabled] = useState(false);\r\n  const { user, loading } = useAuth();\r\n  const { profile, updateProfile } = useProfile(user);\r\n\r\n  // Pending posts state for animation in left column (Array)\r\n  const [pendingPosts, setPendingPosts] = useState<PostData[]>([]);\r\n\r\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const searchParams = useSearchParams();\r\n  const isSettingsOpen = searchParams.get(\"tab\") === \"settings\";\r\n\r\n  const handleCloseSettings = () => {\r\n    if (typeof window !== \"undefined\") {\r\n      const url = new URL(window.location.href);\r\n      url.searchParams.delete(\"tab\");\r\n      window.history.replaceState(null, \"\", url.toString());\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(\"hanabi_sound_enabled\");\r\n    if (stored === \"true\") {\r\n      setSoundEnabled(true);\r\n    } else {\r\n      setSoundEnabled(false);\r\n      if (stored === null) {\r\n        localStorage.setItem(\"hanabi_sound_enabled\", \"false\");\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const toggleSound = () => {\r\n    setSoundEnabled((prev) => {\r\n      const next = !prev;\r\n      localStorage.setItem(\"hanabi_sound_enabled\", next ? \"true\" : \"false\");\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const VolumeToggleButton = ({ className = \"\" }: { className?: string }) => (\r\n    <button\r\n      type=\"button\"\r\n      aria-pressed={soundEnabled}\r\n      aria-label={soundEnabled ? \"Èü≥ÈáèON\" : \"Èü≥ÈáèOFF\"}\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        toggleSound();\r\n      }}\r\n      className={`relative inline-flex h-10 w-10 items-center justify-center bg-black/40 text-white transition-colors hover:border-orange-400/70 hover:text-orange-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500 ${className}`}\r\n    >\r\n      {soundEnabled ? <Volume2 size={18} /> : <VolumeX size={18} />}\r\n    </button>\r\n  );\r\n\r\n  // Show loading state while checking auth\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black text-white flex items-center justify-center\">\r\n        <div className=\"text-white/70\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleComposeClick = () => {\r\n    if (user) {\r\n      setShowCompose((prev) => !prev);\r\n    } else {\r\n      setShowLoginPrompt(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-screen bg-black text-white flex justify-center relative w-full max-w-[100vw] overflow-hidden\">\r\n      {/* Settings Modal (Popup) */}\r\n      {isSettingsOpen && (\r\n        <div className=\"fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n          <div className=\"relative w-full max-w-2xl\">\r\n            {user ? (\r\n              <ProfileSettings\r\n                profile={profile}\r\n                onSave={updateProfile}\r\n                onClose={handleCloseSettings}\r\n              />\r\n            ) : (\r\n              <div className=\"bg-white/5 border border-white/10 rounded-xl p-8 text-center relative\">\r\n                <button\r\n                  onClick={handleCloseSettings}\r\n                  className=\"absolute top-4 right-4 text-white/50 hover:text-white transition-colors\"\r\n                >\r\n                  <X size={20} />\r\n                </button>\r\n                <p>„É≠„Ç∞„Ç§„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>\r\n                <button\r\n                  onClick={() => {\r\n                    handleCloseSettings();\r\n                    setShowLoginPrompt(true);\r\n                  }}\r\n                  className=\"mt-4 px-6 py-2 bg-white text-black rounded-full font-bold\"\r\n                >\r\n                  „É≠„Ç∞„Ç§„É≥ÁîªÈù¢„Å∏\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Login Prompt for Guests */}\r\n      {!user && (\r\n        <div className=\"fixed top-24 sm:top-28 right-3 sm:right-4 z-40 bg-gradient-to-r from-orange-500/90 to-red-600/90 backdrop-blur-sm border border-white/20 rounded-lg p-3 sm:p-4 max-w-sm shadow-lg animate-in fade-in slide-in-from-top-2 duration-500\">\r\n          <div className=\"flex items-start justify-between gap-3\">\r\n            <div className=\"space-y-2 flex-1\">\r\n              <p className=\"font-semibold text-white text-sm sm:text-base\">\r\n                „Åï„Çâ„Å´Ê•Ω„Åó„ÇÄ„Å´„ÅØ„É≠„Ç∞„Ç§„É≥\r\n              </p>\r\n              <p className=\"text-xs sm:text-sm text-white/90\">\r\n                Ëøî‰ø°„ÇÑ„ÅÑ„ÅÑ„Å≠„Å™„Å©„ÅÆÊ©üËÉΩ„Çí‰ΩøÁî®„Åß„Åç„Åæ„Åô\r\n              </p>\r\n              <button\r\n                onClick={() => setShowLoginPrompt(true)}\r\n                className=\"mt-2 px-3 py-1 sm:px-4 sm:py-1.5 bg-white text-black font-bold rounded-full text-xs sm:text-sm hover:bg-white/90 transition-colors\"\r\n              >\r\n                „É≠„Ç∞„Ç§„É≥\r\n              </button>\r\n            </div>\r\n            <button\r\n              onClick={() => setShowLoginPrompt(true)}\r\n              className=\"text-white/60 hover:text-white flex-shrink-0\"\r\n            >\r\n              <X size={18} className=\"sm:hidden\" />\r\n              <X size={20} className=\"hidden sm:block\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"lg:hidden fixed bottom-4 left-4 z-50\">\r\n        {user ? (\r\n          <Link\r\n            href=\"/?tab=settings\"\r\n            className=\"relative flex h-12 w-12 aspect-square items-center justify-center rounded-full border border-white/20 bg-black/60 text-white shadow-[0_0_12px_rgba(0,0,0,0.4)] transition-colors hover:border-white/50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-400\"\r\n          >\r\n            <span className=\"sr-only\">„Éó„É≠„Éï„Ç£„Éº„É´Ë®≠ÂÆö</span>\r\n            <div className=\"flex h-full w-full items-center justify-center p-1\">\r\n              {profile?.photoURL ? (\r\n                <img\r\n                  src={profile.photoURL}\r\n                  alt={profile.displayName}\r\n                  className=\"h-full w-full rounded-full object-cover\"\r\n                />\r\n              ) : (\r\n                <div\r\n                  className={`h-full w-full rounded-full bg-gradient-to-tr ${\r\n                    profile?.avatarGradient || \"from-blue-500 to-purple-600\"\r\n                  }`}\r\n                />\r\n              )}\r\n            </div>\r\n          </Link>\r\n        ) : (\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setShowLoginPrompt(true)}\r\n            className=\"relative flex h-12 w-12 aspect-square items-center justify-center rounded-full border border-white/20 bg-black/60 text-white shadow-[0_0_12px_rgba(0,0,0,0.4)] transition-colors hover:border-white/50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-400\"\r\n          >\r\n            <span className=\"sr-only\">„É≠„Ç∞„Ç§„É≥</span>\r\n            <div className=\"flex h-full w-full items-center justify-center p-1\">\r\n              <div className=\"h-full w-full rounded-full bg-white/10\" />\r\n            </div>\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Login Modal */}\r\n      {showLoginPrompt && !user && (\r\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-black border border-white/20 rounded-2xl p-4 sm:p-6 max-w-sm w-full shadow-2xl animate-in fade-in zoom-in-95 duration-300\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h2 className=\"text-lg sm:text-xl font-bold\">„É≠„Ç∞„Ç§„É≥</h2>\r\n              <button\r\n                onClick={() => setShowLoginPrompt(false)}\r\n                className=\"text-white/40 hover:text-white\"\r\n              >\r\n                <X size={20} className=\"sm:hidden\" />\r\n                <X size={24} className=\"hidden sm:block\" />\r\n              </button>\r\n            </div>\r\n            <Login />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex w-full h-full\">\r\n        {/* Left Sidebar */}\r\n        <Sidebar\r\n          onPostClick={handleComposeClick}\r\n          soundEnabled={soundEnabled}\r\n          onToggleSound={toggleSound}\r\n        />\r\n\r\n        {/* Center Spacer / Pending Post Stage (Between Sidebar and Main Feed) \r\n            Adjusted to top-left align with padding to match \"below Ignite button\"\r\n        */}\r\n        <div\r\n          className=\"hidden lg:flex flex-1 border-r border-white/10 flex-col items-center justify-start pt-[280px] relative gap-6\"\r\n          data-pending-stack\r\n        >\r\n          <AnimatePresence mode=\"popLayout\" initial={false}>\r\n            {pendingPosts.length > 0 ? (\r\n              pendingPosts.map((post) => (\r\n                <motion.div\r\n                  key={post.id}\r\n                  layout\r\n                  initial={{ opacity: 0, scale: 0.9, y: 50 }}\r\n                  animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                  exit={{\r\n                    opacity: 0,\r\n                    scale: 0.9,\r\n                    transition: { duration: 0.2 },\r\n                  }}\r\n                  transition={{\r\n                    layout: { duration: 0.4, ease: \"easeOut\" },\r\n                    opacity: { duration: 0.3 },\r\n                  }}\r\n                  className=\"w-full max-w-md\"\r\n                  onClick={() => {\r\n                    if (typeof window === \"undefined\") return;\r\n                    const count = 3 + Math.floor(Math.random() * 3); // 3-5Áô∫\r\n                    const sentiments = Array.from(\r\n                      { length: count },\r\n                      () => post.sentiment?.label ?? null\r\n                    );\r\n                    window.dispatchEvent(\r\n                      new CustomEvent(\"hanabi-fireworks\", {\r\n                        detail: { sentiments },\r\n                      })\r\n                    );\r\n                  }}\r\n                >\r\n                  {/* Inner wrapper handles the visual animation (10s broadcast sequence) */}\r\n                  <div className=\"w-full animate-broadcast\">\r\n                    <PostCard post={post} onLoginRequired={() => {}} />\r\n                  </div>\r\n                </motion.div>\r\n              ))\r\n            ) : (\r\n              <motion.div\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                className=\"text-white/10 w-full h-full flex flex-col items-center justify-center select-none pb-[280px] absolute inset-0\"\r\n              >\r\n                <div className=\"text-8xl mb-4 opacity-50 grayscale\">üåã</div>\r\n                <div className=\"text-sm tracking-[0.2em] font-light\">\r\n                  NO SIGNAL\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n\r\n        {/* Main Feed (Right Side) */}\r\n        <main className=\"w-full lg:w-[600px] lg:flex-none h-full relative flex flex-col\">\r\n          <div className=\"lg:hidden shrink-0 z-20 bg-black/80 backdrop-blur-sm\">\r\n            <div className=\"flex items-center justify-start gap-12 px-3 py-2\">\r\n              <Link\r\n                href=\"/\"\r\n                className=\"inline-flex items-center justify-center text-3xl font-black tracking-tight text-transparent bg-gradient-to-br from-orange-400 via-red-500 to-purple-600 bg-clip-text drop-shadow-[0_0_20px_rgba(249,115,22,0.8)] leading-none select-none\"\r\n              >\r\n                HANABI\r\n              </Link>\r\n              <VolumeToggleButton />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"shrink-0 bg-black/80 backdrop-blur-md z-10 border-b border-white/20\">\r\n            <div className=\"flex w-full\">\r\n              <div\r\n                onClick={() => setActiveTab(\"everyone\")}\r\n                className={`flex-1 hover:bg-white/10 transition-all duration-300 flex items-center justify-center gap-1 sm:gap-2 py-3 sm:py-4 cursor-pointer relative group ${\r\n                  activeTab === \"everyone\"\r\n                    ? \"\"\r\n                    : \"text-white/50 hover:text-white/80\"\r\n                }`}\r\n              >\r\n                {activeTab === \"everyone\" && (\r\n                  <div className=\"w-2 h-2 bg-gradient-to-tr from-orange-500 to-red-600 rotate-45 shadow-[0_0_8px_rgba(249,115,22,0.6)]\" />\r\n                )}\r\n                <span\r\n                  className={`font-bold drop-shadow-[0_0_8px_rgba(255,255,255,0.8)] text-sm sm:text-base ${\r\n                    activeTab === \"everyone\" ? \"text-white\" : \"\"\r\n                  }`}\r\n                >\r\n                  „Åø„Çì„Å™\r\n                </span>\r\n                {activeTab === \"everyone\" && (\r\n                  <div className=\"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 to-red-600 shadow-[0_0_10px_rgba(249,115,22,0.8)]\" />\r\n                )}\r\n              </div>\r\n\r\n              <div\r\n                onClick={() => setActiveTab(\"solo\")}\r\n                className={`flex-1 hover:bg-white/10 transition-all duration-300 flex items-center justify-center gap-1 sm:gap-2 py-3 sm:py-4 cursor-pointer relative group ${\r\n                  activeTab === \"solo\"\r\n                    ? \"\"\r\n                    : \"text-white/50 hover:text-white/80\"\r\n                }`}\r\n              >\r\n                {activeTab === \"solo\" && (\r\n                  <div className=\"w-2 h-2 bg-gradient-to-tr from-cyan-400 to-blue-500 rotate-45 shadow-[0_0_8px_rgba(34,211,238,0.6)]\" />\r\n                )}\r\n                <span\r\n                  className={`font-medium drop-shadow-[0_0_8px_rgba(255,255,255,0.8)] text-sm sm:text-base ${\r\n                    activeTab === \"solo\" ? \"text-white font-bold\" : \"\"\r\n                  }`}\r\n                >\r\n                  „Åä„Å≤„Å®„Çä\r\n                </span>\r\n                {activeTab === \"solo\" && (\r\n                  <div className=\"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-400 to-blue-600 shadow-[0_0_10px_rgba(34,211,238,0.8)]\" />\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"px-4 sm:px-4\">\r\n              {/* Mobile Compose Button */}\r\n              <div className=\"m-3 lg:hidden\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleComposeClick}\r\n                  className=\"group relative flex w-full items-center justify-center gap-2 overflow-hidden rounded-full border border-white/20 bg-black/20 px-6 py-3 text-xl font-black text-white shadow-[0_0_20px_rgba(249,115,22,0.6)] transition-all hover:bg-white/10 hover:shadow-[0_0_30px_rgba(249,115,22,0.8)]\"\r\n                >\r\n                  <span\r\n                    className=\"absolute inset-0 bg-gradient-to-r from-orange-500 via-red-500 to-pink-600 animate-gradient\"\r\n                    aria-hidden=\"true\"\r\n                  />\r\n                  <span className=\"relative flex items-center justify-center gap-2\">\r\n                    <span className=\"bg-gradient-to-r from-orange-200 to-white bg-clip-text text-transparent drop-shadow-[0_0_4px_rgba(255,255,255,0.8)]\">\r\n                      Áô∫ÁÅ´\r\n                    </span>\r\n                    <span className=\"text-xs font-normal text-white/70 tracking-widest\">\r\n                      IGNITE\r\n                    </span>\r\n                  </span>\r\n                </button>\r\n              </div>\r\n              {user && showCompose && (\r\n                <div className=\"absolute z-20 bg-black w-[92%] pt-4 sm:pt-6\">\r\n                  <CreatePost\r\n                    onPost={() => {}}\r\n                    userProfile={profile}\r\n                    isPrivate={activeTab === \"solo\"}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            ref={scrollContainerRef}\r\n            className=\"pb-20 flex-1 overflow-y-auto min-h-0 container-scroll\"\r\n          >\r\n            <div className=\"p-3 sm:p-4\">\r\n              <SocialTab\r\n                key={activeTab}\r\n                tab={activeTab}\r\n                onPendingPostsChange={setPendingPosts}\r\n                soundEnabled={soundEnabled}\r\n              />\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\FireBreather.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\ImageUploader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Introduction.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\ProfileSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GRADIENT_OPTIONS' is assigned a value but never used.","line":14,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":23},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":143,"column":15,"nodeType":"JSXOpeningElement","endLine":147,"endColumn":17},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":192,"column":15,"nodeType":"JSXOpeningElement","endLine":196,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { UserProfile } from \"@/hooks/useProfile\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { Save, User, LogOut, X } from \"lucide-react\";\r\n\r\ninterface ProfileSettingsProps {\r\n  profile: UserProfile | null;\r\n  onSave: (updates: Partial<UserProfile>) => Promise<void>;\r\n  onClose?: () => void;\r\n}\r\n\r\nconst GRADIENT_OPTIONS = [\r\n  { name: \"Fire\", value: \"from-orange-500 to-red-600\" },\r\n  { name: \"Ocean\", value: \"from-blue-500 to-cyan-600\" },\r\n  { name: \"Forest\", value: \"from-green-400 to-emerald-600\" },\r\n  { name: \"Sunset\", value: \"from-pink-500 to-purple-600\" },\r\n  { name: \"Gold\", value: \"from-yellow-400 to-orange-500\" },\r\n  { name: \"Night\", value: \"from-indigo-500 to-purple-700\" },\r\n  { name: \"Rose\", value: \"from-rose-400 to-pink-600\" },\r\n  { name: \"Electric\", value: \"from-cyan-400 to-blue-600\" },\r\n];\r\n\r\nexport function ProfileSettings({\r\n  profile,\r\n  onSave,\r\n  onClose,\r\n}: ProfileSettingsProps) {\r\n  const { logout } = useAuth();\r\n  const [displayName, setDisplayName] = useState(profile?.displayName || \"\");\r\n  const [avatarGradient, setAvatarGradient] = useState(\r\n    profile?.avatarGradient || \"from-orange-500 to-red-600\"\r\n  );\r\n  const [photoURL, setPhotoURL] = useState(profile?.photoURL || \"\");\r\n  const [uploading, setUploading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n  /* \r\n    Sync state with profile prop when it updates (e.g. from loading -> loaded).\r\n    This fixes the issue where opening settings with loading profile results in empty fields. \r\n  */\r\n  React.useEffect(() => {\r\n    if (profile) {\r\n      setDisplayName(profile.displayName || \"\");\r\n      setAvatarGradient(profile.avatarGradient || \"from-orange-500 to-red-600\");\r\n      setPhotoURL(profile.photoURL || \"\");\r\n    }\r\n  }, [profile]);\r\n\r\n  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file || !profile) return;\r\n\r\n    setUploading(true);\r\n    try {\r\n      // Dynamic import usage was failing or weird, let's use the globals we likely have or will standard import\r\n      const { ref, uploadBytes, getDownloadURL } = await import(\r\n        \"firebase/storage\"\r\n      );\r\n      const { storage } = await import(\"@/lib/firebase\");\r\n\r\n      const imgRef = ref(storage, `avatars/${profile.uid}/${Date.now()}`);\r\n      await uploadBytes(imgRef, file);\r\n      const url = await getDownloadURL(imgRef);\r\n\r\n      setPhotoURL(url);\r\n    } catch (err) {\r\n      console.error(\"Failed to upload image\", err);\r\n      alert(\"ÁîªÂÉè„ÅÆ„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\");\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!displayName.trim()) return;\r\n\r\n    setSaving(true);\r\n    try {\r\n      await onSave({\r\n        displayName: displayName.trim(),\r\n        avatarGradient,\r\n        photoURL: photoURL || undefined,\r\n      });\r\n      alert(\"„Éó„É≠„Éï„Ç£„Éº„É´„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü\"); // Add feedback\r\n    } catch (err) {\r\n      console.error(\"Failed to save profile\", err);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-2xl animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"bg-white/5 border border-white/10 rounded-xl p-6 space-y-6 relative\"\r\n      >\r\n        {onClose && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"absolute top-4 right-4 text-white/50 hover:text-white transition-colors\"\r\n          >\r\n            <X size={20} />\r\n          </button>\r\n        )}\r\n        <div className=\"flex items-center gap-4 pb-4 border-b border-white/10\">\r\n          <User size={24} className=\"text-orange-400\" />\r\n          <h2 className=\"text-2xl font-bold\">„Éó„É≠„Éï„Ç£„Éº„É´Ë®≠ÂÆö</h2>\r\n        </div>\r\n\r\n        {/* Display Name */}\r\n        <div className=\"space-y-2\">\r\n          <label\r\n            htmlFor=\"displayName\"\r\n            className=\"block text-sm font-medium text-white/80\"\r\n          >\r\n            Ë°®Á§∫Âêç\r\n          </label>\r\n          <input\r\n            id=\"displayName\"\r\n            type=\"text\"\r\n            value={displayName}\r\n            onChange={(e) => setDisplayName(e.target.value)}\r\n            placeholder=\"„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÇíÂÖ•Âäõ\"\r\n            className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500/50 transition-all\"\r\n            maxLength={30}\r\n          />\r\n          <p className=\"text-xs text-white/40\">{displayName.length}/30</p>\r\n        </div>\r\n\r\n        {/* Avatar Image Upload */}\r\n        <div className=\"space-y-3\">\r\n          <label className=\"block text-sm font-medium text-white/80\">\r\n            „Éó„É≠„Éï„Ç£„Éº„É´ÁîªÂÉè\r\n          </label>\r\n          <div className=\"flex items-center gap-4\">\r\n            {photoURL ? (\r\n              <img\r\n                src={photoURL}\r\n                alt=\"Avatar\"\r\n                className=\"w-16 h-16 rounded-full object-cover border-2 border-white/20\"\r\n              />\r\n            ) : (\r\n              <div\r\n                className={`w-16 h-16 rounded-full bg-gradient-to-tr ${avatarGradient} flex items-center justify-center text-white font-bold text-xl`}\r\n              >\r\n                {displayName[0]?.toUpperCase() || \"?\"}\r\n              </div>\r\n            )}\r\n            <div className=\"flex-1 space-y-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n                disabled={uploading}\r\n                className=\"px-4 py-2 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 disabled:opacity-50 transition-all\"\r\n              >\r\n                {uploading ? \"„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ‰∏≠...\" : \"ÁîªÂÉè„ÇíÈÅ∏Êäû\"}\r\n              </button>\r\n              {photoURL && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setPhotoURL(\"\")}\r\n                  className=\"ml-2 px-4 py-2 bg-red-600/20 text-red-400 rounded-lg text-sm hover:bg-red-600/30 transition-all\"\r\n                >\r\n                  ÂâäÈô§\r\n                </button>\r\n              )}\r\n              <input\r\n                type=\"file\"\r\n                ref={fileInputRef}\r\n                className=\"hidden\"\r\n                accept=\"image/*\"\r\n                onChange={handleImageUpload}\r\n              />\r\n              <p className=\"text-xs text-white/40\">ÁîªÂÉè„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Preview */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium text-white/80\">\r\n            „Éó„É¨„Éì„É•„Éº\r\n          </label>\r\n          <div className=\"flex items-center gap-4 p-4 bg-white/5 rounded-lg border border-white/10\">\r\n            {photoURL ? (\r\n              <img\r\n                src={photoURL}\r\n                alt=\"Preview\"\r\n                className=\"w-12 h-12 rounded-full object-cover\"\r\n              />\r\n            ) : (\r\n              <div\r\n                className={`w-12 h-12 rounded-full bg-gradient-to-tr ${avatarGradient} flex items-center justify-center text-white font-bold`}\r\n              >\r\n                {displayName[0]?.toUpperCase() || \"?\"}\r\n              </div>\r\n            )}\r\n            <div>\r\n              <p className=\"font-bold\">{displayName || \"„Éã„ÉÉ„ÇØ„Éç„Éº„É†\"}</p>\r\n              <p className=\"text-sm text-white/40\">\r\n                @{(displayName || \"username\").toLowerCase().replace(/\\s+/g, \"\")}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Save Button */}\r\n        <button\r\n          type=\"submit\"\r\n          disabled={saving || !displayName.trim()}\r\n          className=\"w-full px-6 py-3 bg-orange-600 text-white rounded-lg font-bold hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all\"\r\n        >\r\n          <Save size={18} />\r\n          {saving ? \"‰øùÂ≠ò‰∏≠...\" : \"‰øùÂ≠ò\"}\r\n        </button>\r\n\r\n        {/* App Settings */}\r\n        <div className=\"pt-6 border-t border-white/10 space-y-4\">\r\n          <h3 className=\"text-lg font-bold text-white/90\">„Ç¢„Éó„É™Ë®≠ÂÆö</h3>\r\n          <div className=\"flex items-center justify-between\">\r\n            <label\r\n              htmlFor=\"hideNegative\"\r\n              className=\"text-sm font-medium text-white/80\"\r\n            >\r\n              „Éç„Ç¨„ÉÜ„Ç£„Éñ„Å™ÊäïÁ®ø„ÇíÈùûË°®Á§∫„Å´„Åô„Çã\r\n            </label>\r\n            <HideNegativeToggle />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"pt-4 border-t border-white/10\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => logout()}\r\n            className=\"w-full px-6 py-3 bg-white/5 text-red-400 rounded-lg font-bold hover:bg-red-500/10 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n            <LogOut size={18} />\r\n            „É≠„Ç∞„Ç¢„Ç¶„Éà\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction HideNegativeToggle() {\r\n  const [enabled, setEnabled] = useState(false);\r\n\r\n  React.useEffect(() => {\r\n    const v = localStorage.getItem(\"hanabi_hide_negative\") === \"true\";\r\n    setEnabled(v);\r\n  }, []);\r\n\r\n  const toggle = () => {\r\n    const newValue = !enabled;\r\n    setEnabled(newValue);\r\n    localStorage.setItem(\"hanabi_hide_negative\", String(newValue));\r\n    // Dispatch event so other tabs/components know immediately\r\n    window.dispatchEvent(new Event(\"storage\"));\r\n  };\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={toggle}\r\n      className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500/50 ${\r\n        enabled ? \"bg-orange-500\" : \"bg-white/20\"\r\n      }`}\r\n    >\r\n      <span\r\n        className={`${\r\n          enabled ? \"translate-x-6\" : \"translate-x-1\"\r\n        } inline-block h-4 w-4 transform rounded-full bg-white transition-transform`}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\RealTimeFire.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'videoRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'videoRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":86,"column":32,"nodeType":"Identifier","endLine":86,"endColumn":39}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2272,2275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2272,2275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3338,3341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3338,3341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useFireParticles } from \"@/hooks/useFireParticles\";\r\nimport { VideoOff } from \"lucide-react\";\r\n\r\nexport function RealTimeFire() {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [isCameraReady, setIsCameraReady] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [status, setStatus] = useState<\r\n    \"idle\" | \"initializing\" | \"running\" | \"error\"\r\n  >(\"idle\");\r\n  const [debugMsg, setDebugMsg] = useState<string>(\"\");\r\n\r\n  const { emitParticles, updateAndDrawParticles } = useFireParticles();\r\n  const requestRef = useRef<number | null>(null);\r\n  const faceApiRef = useRef<unknown>(null); // Store face-api instance\r\n  const frameCountRef = useRef(0); // For throttling detection\r\n\r\n  // 1. Setup Camera and Models\r\n  const startCamera = async () => {\r\n    setStatus(\"initializing\");\r\n    let stream: MediaStream | null = null;\r\n\r\n    try {\r\n      const faceapi = await import(\"face-api.js\");\r\n      faceApiRef.current = faceapi;\r\n\r\n      const MODEL_URL =\r\n        \"https://justadudewhohacks.github.io/face-api.js/models\";\r\n\r\n      await Promise.all([\r\n        faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL),\r\n        faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL),\r\n      ]);\r\n\r\n      stream = await navigator.mediaDevices.getUserMedia({\r\n        video: {\r\n          width: { ideal: 640 },\r\n          height: { ideal: 480 },\r\n          facingMode: \"user\",\r\n        },\r\n      });\r\n\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        // Ensure video plays inline\r\n        videoRef.current.setAttribute(\"playsinline\", \"true\");\r\n\r\n        videoRef.current.onloadedmetadata = () => {\r\n          if (videoRef.current) {\r\n            // Check if ref is still valid\r\n            videoRef.current\r\n              ?.play()\r\n              .catch((e) => console.error(\"Play error:\", e));\r\n            setIsCameraReady(true);\r\n            setStatus(\"running\");\r\n          }\r\n        };\r\n      }\r\n    } catch (err: unknown) {\r\n      console.error(err);\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      const e = err as any;\r\n      if (e.name === \"NotAllowedError\" || e.name === \"PermissionDeniedError\") {\r\n        setError(\r\n          \"„Ç´„É°„É©„ÅÆ„Ç¢„ÇØ„Çª„Çπ„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åß„Ç´„É°„É©„ÇíË®±ÂèØ„Åó„Å¶„ÄÅÂÜçË©¶Ë°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\"\r\n        );\r\n      } else if (\r\n        err.name === \"NotFoundError\" ||\r\n        err.name === \"DevicesNotFoundError\"\r\n      ) {\r\n        setError(\"„Ç´„É°„É©„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ\");\r\n      } else {\r\n        setError(`„Ç´„É°„É©„Ç®„É©„Éº: ${e.message || \"Unknown error\"}`);\r\n      }\r\n      setStatus(\"error\");\r\n    }\r\n  };\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      const videoEl = videoRef.current;\r\n      if (videoEl && videoEl.srcObject) {\r\n        const stream = videoEl.srcObject as MediaStream;\r\n        stream.getTracks().forEach((track) => track.stop());\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // 2. Detection & Rendering Loop\r\n  useEffect(() => {\r\n    if (\r\n      !isCameraReady ||\r\n      !videoRef.current ||\r\n      !canvasRef.current ||\r\n      !faceApiRef.current\r\n    )\r\n      return;\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const faceapi = faceApiRef.current as any;\r\n\r\n    // TinyDetector options - lower threshold for easier detection, smaller size for speed\r\n    const detectorOptions = new faceapi.TinyFaceDetectorOptions({\r\n      inputSize: 224,\r\n      scoreThreshold: 0.3,\r\n    });\r\n\r\n    const detectAndDraw = async () => {\r\n      if (\r\n        !videoRef.current ||\r\n        !canvasRef.current ||\r\n        videoRef.current.paused ||\r\n        videoRef.current.ended\r\n      ) {\r\n        requestRef.current = requestAnimationFrame(detectAndDraw);\r\n        return;\r\n      }\r\n\r\n      // Match canvas size to video\r\n      if (canvasRef.current.width !== videoRef.current.videoWidth) {\r\n        canvasRef.current.width = videoRef.current.videoWidth;\r\n        canvasRef.current.height = videoRef.current.videoHeight;\r\n      }\r\n\r\n      const width = canvasRef.current.width;\r\n      const height = canvasRef.current.height;\r\n      const ctx = canvasRef.current.getContext(\"2d\");\r\n      if (!ctx) return;\r\n\r\n      // Draw Video Background (Mirrored)\r\n      ctx.save();\r\n      ctx.translate(width, 0);\r\n      ctx.scale(-1, 1);\r\n      ctx.drawImage(videoRef.current, 0, 0, width, height);\r\n      ctx.restore();\r\n\r\n      // Detect Face (Throttled: every 3rd frame to save CPU)\r\n      frameCountRef.current++;\r\n      if (frameCountRef.current % 3 === 0) {\r\n        try {\r\n          // Detect on video element\r\n          const detection = await faceapi\r\n            .detectSingleFace(videoRef.current, detectorOptions)\r\n            .withFaceLandmarks();\r\n\r\n          if (detection) {\r\n            const nose = detection.landmarks.getNose()[6];\r\n            // Adjust nose x for mirroring\r\n            const mirroredX = width - nose.x;\r\n\r\n            // Emit particles\r\n            emitParticles({ x: mirroredX, y: nose.y }, 3); // Emit fewer but more often if we detect fast? No, burst emit.\r\n\r\n            setDebugMsg(\"Face Detected\");\r\n          } else {\r\n            setDebugMsg(\"Searching...\");\r\n          }\r\n        } catch (e) {\r\n          console.warn(\"Detection error\", e);\r\n        }\r\n      }\r\n\r\n      // Draw Particles\r\n      updateAndDrawParticles(ctx);\r\n      requestRef.current = requestAnimationFrame(detectAndDraw);\r\n    };\r\n\r\n    requestRef.current = requestAnimationFrame(detectAndDraw);\r\n\r\n    return () => {\r\n      if (requestRef.current) cancelAnimationFrame(requestRef.current);\r\n    };\r\n  }, [isCameraReady, emitParticles, updateAndDrawParticles]);\r\n\r\n  if (status === \"idle\") {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center p-12 text-center border border-white/10 bg-black rounded-xl h-[400px]\">\r\n        <h3 className=\"text-xl font-bold text-white mb-6\">\r\n          Real-time Fire Camera\r\n        </h3>\r\n        <p className=\"text-white/60 mb-8 max-w-md\">\r\n          „Ç´„É°„É©„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„ÅÇ„Å™„Åü„ÅÆÈ°î„Å´Âêà„Çè„Åõ„Å¶ÁÇé„ÅÆ„Ç®„Éï„Çß„ÇØ„Éà„ÇíË°®Á§∫„Åó„Åæ„Åô„ÄÇ\r\n          <br />\r\n          „Ç´„É°„É©„ÅÆ‰ΩøÁî®„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\r\n        </p>\r\n        <button\r\n          onClick={startCamera}\r\n          className=\"px-8 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full font-bold hover:from-orange-400 hover:to-red-500 transition-all shadow-lg hover:shadow-orange-500/25\"\r\n        >\r\n          „Ç´„É°„É©„ÇíÈñãÂßã„Åô„Çã\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (status === \"error\") {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center p-12 text-center border border-red-500/30 bg-red-500/10 rounded-xl h-[400px]\">\r\n        <VideoOff className=\"w-16 h-16 text-red-500 mb-6\" />\r\n        <h3 className=\"text-xl font-bold text-red-400 mb-2\">Camera Error</h3>\r\n        <p className=\"text-red-200 mb-6 max-w-md\">{error}</p>\r\n        <button\r\n          onClick={() => setStatus(\"idle\")}\r\n          className=\"px-6 py-2 bg-red-500 hover:bg-red-600 text-white rounded-full font-bold transition-colors\"\r\n        >\r\n          Êàª„Çã\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative w-full max-w-4xl rounded-xl overflow-hidden border border-white/10 shadow-2xl bg-black\">\r\n      {/* Hidden Video element for source */}\r\n      <video ref={videoRef} muted autoPlay playsInline className=\"hidden\" />\r\n\r\n      {/* Canvas for display */}\r\n      <canvas ref={canvasRef} className=\"w-full h-auto block\" />\r\n\r\n      {/* Status Overlay */}\r\n      <div className=\"absolute top-4 left-4 pointer-events-none\">\r\n        {debugMsg === \"Searching...\" && (\r\n          <div className=\"bg-yellow-500/50 px-3 py-1 rounded-full text-xs text-white backdrop-blur-sm border border-yellow-300/30 animate-pulse\">\r\n            üîç Searching for nose...\r\n          </div>\r\n        )}\r\n        {debugMsg === \"Face Detected\" && (\r\n          <div className=\"bg-green-500/50 px-3 py-1 rounded-full text-xs text-white backdrop-blur-sm border border-green-300/30\">\r\n            ‚úÖ Nose Linked\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {status === \"initializing\" && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/80 z-20\">\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <div className=\"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin\" />\r\n            <p className=\"text-orange-400 font-bold animate-pulse\">\r\n              Starting Camera & Loading AI...\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"absolute top-4 right-4 bg-black/50 px-3 py-1 rounded-full text-xs text-white/50 border border-white/10 backdrop-blur-sm\">\r\n        Real-time Face Tracking\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\CreatePost.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":161,"column":11,"nodeType":"JSXOpeningElement","endLine":165,"endColumn":13},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":189,"column":17,"nodeType":"JSXOpeningElement","endLine":193,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useRef } from \"react\";\r\nimport { Image as ImageIcon, Send, X } from \"lucide-react\";\r\nimport { PostData } from \"./PostCard\";\r\nimport { db, storage } from \"@/lib/firebase\";\r\nimport {\r\n  Timestamp,\r\n  addDoc,\r\n  collection,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\nimport { getDownloadURL, ref, uploadBytes } from \"firebase/storage\";\r\nimport { UserProfile } from \"@/hooks/useProfile\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { analyzeSentimentAction } from \"@/app/actions/sentiment\";\r\n\r\ninterface CreatePostProps {\r\n  onPost: (newPost: PostData) => void;\r\n  userProfile: UserProfile | null;\r\n  isPrivate?: boolean;\r\n}\r\n\r\nexport function CreatePost({\r\n  onPost,\r\n  userProfile,\r\n  isPrivate = false,\r\n}: CreatePostProps) {\r\n  const { user } = useAuth();\r\n  const [content, setContent] = useState(\"\");\r\n  /* \r\n    State for File Upload \r\n    - fileObj: The actual File object to upload\r\n    - previewUrl: A local URL (blob or dataUrl) for previewing\r\n  */\r\n  const [fileObj, setFileObj] = useState<File | null>(null);\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      // 30MB Limit Check\r\n      if (file.size > 30 * 1024 * 1024) {\r\n        alert(\"File size must be less than 30MB.\");\r\n        return;\r\n      }\r\n\r\n      setFileObj(file);\r\n\r\n      // Create preview\r\n      if (file.type.startsWith(\"image/\")) {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          setPreviewUrl(reader.result as string);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      } else if (file.type.startsWith(\"video/\")) {\r\n        setPreviewUrl(URL.createObjectURL(file));\r\n      } else {\r\n        // For other files, no preview image, just show icon/name\r\n        setPreviewUrl(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent | React.KeyboardEvent) => {\r\n    e.preventDefault();\r\n    if (!content.trim() && !fileObj) return;\r\n    if (content.length > 400) return; // Enforce limit\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      // 1) Submit attachment to Storage\r\n      let attachmentData:\r\n        | { url: string; type: string; name: string; size: number }\r\n        | undefined = undefined;\r\n\r\n      if (fileObj) {\r\n        const tempId = Date.now().toString();\r\n        // Keep original extension or name if possible, but simplify for now\r\n        const storageRef = ref(\r\n          storage,\r\n          `posts/${user?.uid ?? \"anon\"}/${tempId}_${fileObj.name}`\r\n        );\r\n\r\n        await uploadBytes(storageRef, fileObj);\r\n        const url = await getDownloadURL(storageRef);\r\n\r\n        attachmentData = {\r\n          url,\r\n          type: fileObj.type,\r\n          name: fileObj.name,\r\n          size: fileObj.size,\r\n        };\r\n      }\r\n\r\n      // 2) Firestore „Å´ÊäïÁ®ø„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíËøΩÂä†\r\n      const author = userProfile?.displayName || \"Dragon Master\";\r\n      const avatar =\r\n        userProfile?.avatarGradient || \"from-orange-500 to-red-600\";\r\n      const photoURL = userProfile?.photoURL || null;\r\n\r\n      // Analyze sentiment\r\n      const sentiment = await analyzeSentimentAction(content.trim());\r\n      console.log(\"Analyzed sentiment:\", sentiment);\r\n\r\n      const docRef = await addDoc(collection(db, \"posts\"), {\r\n        author,\r\n        authorId: user?.uid || null, // Handle undefined for anonymous users\r\n        avatar,\r\n        photoURL,\r\n        content: content.trim(),\r\n        attachment: attachmentData || null,\r\n        sentiment, // Save sentiment\r\n        timestamp: serverTimestamp(),\r\n        expiresAt: Timestamp.fromMillis(Date.now() + 60 * 60 * 1000),\r\n        likes: 0,\r\n        visibility: isPrivate ? \"private\" : \"public\",\r\n      });\r\n\r\n      const newPost: PostData = {\r\n        id: docRef.id,\r\n        author,\r\n        avatar,\r\n        photoURL: photoURL || undefined,\r\n        content: content.trim(),\r\n        attachment: attachmentData,\r\n        sentiment,\r\n        timestamp: Date.now(), // Ë°®Á§∫Áî®„Å´‰ªÆ„Çø„Ç§„É†„Çπ„Çø„É≥„ÉóÔºà„Çµ„Éº„Éê„ÉºÂÅ¥„ÅØ serverTimestampÔºâ\r\n        expiresAt: Date.now() + 60 * 60 * 1000,\r\n        likes: 0,\r\n      };\r\n      console.log(\"CreatePost onPost dispatch\", newPost.id);\r\n      onPost(newPost);\r\n\r\n      // Reset form\r\n      setContent(\"\");\r\n      setFileObj(null);\r\n      setPreviewUrl(null);\r\n    } catch (err) {\r\n      console.error(\"Failed to submit post\", err);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const avatarGradient =\r\n    userProfile?.avatarGradient || \"from-orange-500 to-red-600\";\r\n  const userPhotoURL = userProfile?.photoURL;\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className=\"w-full bg-white/5 border border-white/10 rounded-lg sm:rounded-xl p-3 sm:p-4 mb-6 sm:mb-8\"\r\n    >\r\n      <div className=\"flex gap-2 sm:gap-4\">\r\n        {userPhotoURL ? (\r\n          <img\r\n            src={userPhotoURL}\r\n            alt=\"Your avatar\"\r\n            className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 object-cover\"\r\n          />\r\n        ) : (\r\n          <div\r\n            className={`w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r ${avatarGradient} flex-shrink-0`}\r\n          />\r\n        )}\r\n        <div className=\"flex-1 space-y-4\">\r\n          <textarea\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            onKeyDown={(e) => {\r\n              if (e.key === \"Enter\" && !e.shiftKey) {\r\n                e.preventDefault();\r\n                handleSubmit(e);\r\n              }\r\n            }}\r\n            placeholder=\"„Å™„Å´„ÇíÁÇé‰∏ä„Åï„Åõ„Çã? üî•\"\r\n            className=\"w-full bg-transparent border-none focus:ring-0 text-white placeholder-white/40 text-base sm:text-lg resize-none min-h-[80px]\"\r\n          />\r\n\r\n          {fileObj && (\r\n            <div className=\"relative inline-block mt-2\">\r\n              {/* Preview Rendering based on type */}\r\n              {fileObj.type.startsWith(\"image/\") && previewUrl ? (\r\n                <img\r\n                  src={previewUrl}\r\n                  alt=\"Preview\"\r\n                  className=\"h-24 sm:h-32 w-auto rounded-lg border border-white/20 object-cover\"\r\n                />\r\n              ) : fileObj.type.startsWith(\"video/\") && previewUrl ? (\r\n                <video\r\n                  src={previewUrl}\r\n                  className=\"h-24 sm:h-32 w-auto rounded-lg border border-white/20 bg-black\"\r\n                  controls={false} // Just a thumbnail feel\r\n                />\r\n              ) : (\r\n                <div className=\"h-14 sm:h-16 flex items-center gap-2 sm:gap-3 bg-white/10 rounded-lg px-3 sm:px-4 border border-white/20\">\r\n                  <div className=\"font-bold text-white text-xs sm:text-sm truncate max-w-[100px] sm:max-w-[150px]\">\r\n                    {fileObj.name}\r\n                  </div>\r\n                  <div className=\"text-white/50 text-xs\">\r\n                    {(fileObj.size / 1024 / 1024).toFixed(2)} MB\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setFileObj(null);\r\n                  setPreviewUrl(null);\r\n                  if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n                }}\r\n                className=\"absolute -top-2 -right-2 bg-black/80 rounded-full p-1 text-white hover:bg-black transition-colors border border-white/20\"\r\n              >\r\n                <X size={14} />\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between items-center border-t border-white/10 pt-3 sm:pt-4\">\r\n            {!fileObj ? (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n                className=\"text-orange-400 hover:text-orange-300 transition-colors p-2 rounded-full hover:bg-orange-500/10\"\r\n              >\r\n                <ImageIcon size={20} />\r\n              </button>\r\n            ) : (\r\n              <div />\r\n            )}\r\n            <input\r\n              type=\"file\"\r\n              ref={fileInputRef}\r\n              className=\"hidden\"\r\n              // accept=\"image/*\" // Removed to allow all files\r\n              onChange={handleFileSelect}\r\n            />\r\n\r\n            <div className=\"flex items-center gap-3\">\r\n              <span\r\n                className={`text-xs ${\r\n                  content.length > 400\r\n                    ? \"text-red-500 font-bold\"\r\n                    : \"text-white/40\"\r\n                }`}\r\n              >\r\n                {content.length}/400\r\n              </span>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={\r\n                  submitting ||\r\n                  (!content.trim() && !fileObj) ||\r\n                  content.length > 400\r\n                }\r\n                className=\"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-full font-bold text-sm hover:from-orange-400 hover:to-red-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all shadow-lg hover:shadow-orange-500/25\"\r\n              >\r\n                <Send size={16} />\r\n                {submitting ? \"Áô∫ÁÅ´‰∏≠...\" : \"Áô∫ÁÅ´\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\DraggablePostCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\FireworksOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\PostCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onLoginRequired' is defined but never used.","line":41,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":49},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":122,"column":11,"nodeType":"JSXOpeningElement","endLine":126,"endColumn":13},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":205,"column":17,"nodeType":"JSXOpeningElement","endLine":210,"endColumn":19},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":259,"column":15,"nodeType":"JSXOpeningElement","endLine":264,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { MoreHorizontal, Trash2 } from \"lucide-react\";\r\nimport { db, storage } from \"@/lib/firebase\";\r\nimport { doc, deleteDoc } from \"firebase/firestore\";\r\nimport { deleteObject, ref } from \"firebase/storage\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\n\r\nexport interface Attachment {\r\n  url: string;\r\n  type: string; // MIME type\r\n  name: string;\r\n  size: number;\r\n}\r\n\r\nexport interface PostData {\r\n  id: string;\r\n  author: string;\r\n  authorId?: string;\r\n  visibility?: \"public\" | \"private\";\r\n  avatar: string; // Gradient classes or placeholder\r\n  photoURL?: string; // User's custom avatar image URL\r\n  content: string;\r\n  image?: string; // Legacy field for backward compatibility\r\n  attachment?: Attachment;\r\n  sentiment?: {\r\n    score: number;\r\n    label: \"positive\" | \"negative\" | \"neutral\";\r\n  };\r\n  timestamp: number;\r\n  likes: number;\r\n  expiresAt?: number; // epoch ms when the post should expire\r\n}\r\n\r\ninterface PostCardProps {\r\n  post: PostData;\r\n  onLoginRequired?: () => void;\r\n}\r\n\r\nexport function PostCard({ post, onLoginRequired }: PostCardProps) {\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  const { user } = useAuth();\r\n\r\n  // Close menu when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setShowMenu(false);\r\n      }\r\n    }\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const deleteAttachmentFromStorage = async (url?: string) => {\r\n    if (!url) return;\r\n    try {\r\n      const fileRef = ref(storage, url);\r\n      await deleteObject(fileRef);\r\n    } catch (err) {\r\n      console.warn(\"Failed to delete attachment from storage\", err);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!confirm(\"Are you sure you want to delete this post?\")) return;\r\n    try {\r\n      await deleteAttachmentFromStorage(post.attachment?.url ?? post.image);\r\n      await deleteDoc(doc(db, \"posts\", post.id));\r\n      // No need to update state manually, SocialTab listener handles it\r\n    } catch (error) {\r\n      console.error(\"Error deleting post:\", error);\r\n      alert(\"Failed to delete post.\");\r\n    }\r\n  };\r\n\r\n  const formatDate = (ts: number) => {\r\n    return new Date(ts).toLocaleString(undefined, {\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  };\r\n\r\n  const handleCardClick = async (e: React.MouseEvent) => {\r\n    // Ignore clicks on interactive elements\r\n    if (\r\n      (e.target as HTMLElement).closest(\"button\") ||\r\n      (e.target as HTMLElement).closest(\"a\") ||\r\n      (e.target as HTMLElement).closest(\"video\") ||\r\n      (e.target as HTMLElement).tagName === \"IMG\"\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Add fireworks event to Firestore for real-time sync\r\n      const { addDoc, collection, serverTimestamp } = await import(\"firebase/firestore\");\r\n      await addDoc(collection(db, \"fireworks\"), {\r\n        postId: post.id,\r\n        sentiment: post.sentiment?.label ?? null,\r\n        timestamp: serverTimestamp(),\r\n        count: Math.floor(Math.random() * 3) + 1, // 1-3 fireworks\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Failed to trigger fireworks:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      onClick={handleCardClick}\r\n      className=\"w-full bg-white/5 backdrop-blur-md border border-white/10 rounded-lg sm:rounded-xl overflow-visible hover:bg-white/[0.07] transition-all duration-300 relative shadow-lg hover:shadow-orange-500/5 group cursor-pointer active:scale-[0.98]\">\r\n      <div className=\"p-3 sm:p-4 flex gap-2 sm:gap-4\">\r\n        {/* Avatar */}\r\n        {post.photoURL ? (\r\n          <img\r\n            src={post.photoURL}\r\n            alt={post.author}\r\n            className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 object-cover\"\r\n          />\r\n        ) : (\r\n          <div\r\n            className={`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 bg-gradient-to-tr ${post.avatar} flex items-center justify-center text-white font-bold text-xs sm:text-sm`}\r\n          >\r\n            {post.author[0]}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex-1 space-y-2 min-w-0\">\r\n          {/* Header */}\r\n          <div className=\"flex justify-between items-start relative gap-2\">\r\n            <div className=\"flex items-center gap-1 sm:gap-2 flex-wrap\">\r\n              <span className=\"font-bold text-sm sm:text-base\">\r\n                {post.author}\r\n              </span>\r\n              <span className=\"text-white/40 text-xs sm:text-sm\">\r\n                @{post.author.toLowerCase().replace(\" \", \"\")}\r\n              </span>\r\n              <span className=\"text-white/40 text-xs sm:text-sm hidden sm:inline\">\r\n                ¬∑ {formatDate(post.timestamp)}\r\n              </span>\r\n              {post.sentiment && (\r\n                <span\r\n                  className={`text-[10px] px-2 py-0.5 rounded-full border ${\r\n                    post.sentiment.label === \"positive\"\r\n                      ? \"border-orange-500/50 text-orange-400 bg-orange-500/10\"\r\n                      : post.sentiment.label === \"neutral\"\r\n                      ? \"border-green-500/50 text-green-400 bg-green-500/10\"\r\n                      : \"border-blue-500/50 text-blue-400 bg-blue-500/10\"\r\n                  }`}\r\n                >\r\n                  {post.sentiment.label === \"positive\"\r\n                    ? \"Positive\"\r\n                    : post.sentiment.label === \"neutral\"\r\n                    ? \"Neutral\"\r\n                    : \"Negative\"}\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"relative\" ref={menuRef}>\r\n              <button\r\n                onClick={() => setShowMenu(!showMenu)}\r\n                className=\"text-white/40 hover:text-white p-1.5 sm:p-1 rounded-full hover:bg-white/10 transition-colors flex-shrink-0\"\r\n              >\r\n                <MoreHorizontal size={16} className=\"sm:hidden\" />\r\n                <MoreHorizontal size={18} className=\"hidden sm:block\" />\r\n              </button>\r\n\r\n              {showMenu && (\r\n                <div className=\"absolute right-0 mt-2 w-28 sm:w-32 bg-black border border-white/20 rounded-lg sm:rounded-xl shadow-xl z-20 overflow-hidden animate-in fade-in zoom-in-95 duration-100\">\r\n                  {!post.authorId || (user && user.uid === post.authorId) ? (\r\n                    <button\r\n                      onClick={handleDelete}\r\n                      className=\"w-full text-left px-4 py-3 text-red-500 hover:bg-white/10 flex items-center gap-2 text-sm font-bold\"\r\n                    >\r\n                      <Trash2 size={16} />\r\n                      Delete\r\n                    </button>\r\n                  ) : (\r\n                    <div className=\"px-4 py-3 text-white/50 text-sm italic\">\r\n                      No actions\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <p className=\"text-white/90 whitespace-pre-wrap break-words\">\r\n            {post.content}\r\n          </p>\r\n\r\n          {/* Media Attachment */}\r\n          {post.attachment ? (\r\n            <div className=\"mt-2 sm:mt-3 rounded-lg overflow-hidden border border-white/10\">\r\n              {post.attachment.type.startsWith(\"image/\") ? (\r\n                <img\r\n                  src={post.attachment.url}\r\n                  alt={post.attachment.name}\r\n                  className=\"w-full h-auto max-h-[300px] sm:max-h-[400px] object-cover\"\r\n                  loading=\"lazy\"\r\n                />\r\n              ) : post.attachment.type.startsWith(\"video/\") ? (\r\n                <video\r\n                  src={post.attachment.url}\r\n                  className=\"w-full h-auto max-h-[300px] sm:max-h-[400px] bg-black\"\r\n                  controls\r\n                  playsInline\r\n                />\r\n              ) : (\r\n                <div className=\"bg-white/5 p-3 sm:p-4 flex items-center gap-2 sm:gap-3\">\r\n                  <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded bg-white/10 flex items-center justify-center text-orange-400 flex-shrink-0\">\r\n                    {/* Generic File Icon */}\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      width=\"24\"\r\n                      height=\"24\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"2\"\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                    >\r\n                      <path d=\"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\" />\r\n                      <polyline points=\"14 2 14 8 20 8\" />\r\n                    </svg>\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"font-bold truncate\">\r\n                      {post.attachment.name}\r\n                    </div>\r\n                    <div className=\"text-xs text-white/50\">\r\n                      {(post.attachment.size / 1024 / 1024).toFixed(2)} MB\r\n                    </div>\r\n                  </div>\r\n                  <a\r\n                    href={post.attachment.url}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-full text-sm font-bold transition-colors\"\r\n                  >\r\n                    Open\r\n                  </a>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : post.image ? (\r\n            // Legacy Image Support\r\n            <div className=\"mt-3 rounded-lg overflow-hidden border border-white/10\">\r\n              <img\r\n                src={post.image}\r\n                alt=\"Post content\"\r\n                className=\"w-full h-auto max-h-[400px] object-cover\"\r\n                loading=\"lazy\"\r\n              />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\PostModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\Sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":26,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'displayName' is assigned a value but never used.","line":27,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userId' is assigned a value but never used.","line":32,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'avatarGradient' is assigned a value but never used.","line":33,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'avatarUrl' is assigned a value but never used.","line":35,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":18},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":122,"column":13,"nodeType":"JSXOpeningElement","endLine":126,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nimport { Home, MoreHorizontal, Volume2, VolumeX } from \"lucide-react\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { useProfile } from \"@/hooks/useProfile\";\r\n\r\ninterface SidebarProps {\r\n  onPostClick?: () => void;\r\n  soundEnabled?: boolean;\r\n  onToggleSound?: () => void;\r\n}\r\n\r\nexport function Sidebar({\r\n  onPostClick,\r\n  soundEnabled = false,\r\n  onToggleSound,\r\n}: SidebarProps) {\r\n  const { user, loading: authLoading } = useAuth();\r\n  const { profile, loading: profileLoading } = useProfile(user);\r\n\r\n  const navItems = [{ icon: Home, label: \"Â§úÁ©∫\", href: \"/sns\", active: true }];\r\n\r\n  const isLoading = authLoading || profileLoading;\r\n  const displayName =\r\n    profile?.displayName ||\r\n    user?.displayName ||\r\n    user?.email?.split(\"@\")[0] ||\r\n    \"Êú™„É≠„Ç∞„Ç§„É≥\";\r\n  const userId = profile?.uid || user?.uid || \"guest\";\r\n  const avatarGradient =\r\n    profile?.avatarGradient || \"from-orange-400 to-red-600\";\r\n  const avatarUrl = profile?.photoURL || user?.photoURL;\r\n\r\n  return (\r\n    <div className=\"sticky top-0 h-screen w-[275px] shrink-0 flex flex-col justify-between px-4 py-4 border-r border-white/20 overflow-y-auto hidden lg:flex\">\r\n      <div className=\"flex flex-col gap-2\">\r\n        {/* Logo + Volume */}\r\n        <div className=\"flex items-center justify-between w-full gap-3 mb-4\">\r\n          <Link\r\n            href=\"/\"\r\n            className=\"inline-flex items-center gap-2 text-3xl font-black bg-gradient-to-br from-pink-500 via-orange-500 to-blue-500 bg-clip-text text-transparent tracking-tighter drop-shadow-[0_0_10px_rgba(236,72,153,0.5)] leading-none select-none\"\r\n          >\r\n            HANABI\r\n          </Link>\r\n          <button\r\n            type=\"button\"\r\n            aria-pressed={soundEnabled}\r\n            aria-label={soundEnabled ? \"Èü≥ÈáèON\" : \"Èü≥ÈáèOFF\"}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onToggleSound?.();\r\n            }}\r\n            disabled={!onToggleSound}\r\n            className=\"relative inline-flex h-10 w-10 items-center justify-center bg-black/40 text-white transition-colors hover:border-orange-400/70 hover:text-orange-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {soundEnabled ? <Volume2 size={18} /> : <VolumeX size={18} />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Navigation Items */}\r\n        <nav className=\"flex flex-col gap-2\">\r\n          {navItems.map((item) => (\r\n            <Link\r\n              key={item.label}\r\n              href={item.href}\r\n              className={`flex items-center gap-4 px-4 py-3 rounded-full text-xl transition-all duration-300 ${\r\n                item.active\r\n                  ? \"font-bold text-white shadow-[0_0_15px_rgba(249,115,22,0.3)] bg-white/5 border border-white/10\"\r\n                  : \"font-normal text-white/60 hover:text-white hover:bg-white/10\"\r\n              }`}\r\n            >\r\n              <item.icon\r\n                size={26}\r\n                strokeWidth={item.active ? 3 : 2}\r\n                className={\r\n                  item.active\r\n                    ? \"text-orange-400 drop-shadow-[0_0_8px_rgba(249,115,22,0.8)]\"\r\n                    : \"\"\r\n                }\r\n              />\r\n              <span\r\n                className={\r\n                  item.active\r\n                    ? \"text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-pink-500\"\r\n                    : \"\"\r\n                }\r\n              >\r\n                {item.label}\r\n              </span>\r\n            </Link>\r\n          ))}\r\n        </nav>\r\n\r\n        {/* Post Button -> Ignite Button */}\r\n        <button\r\n          onClick={onPostClick}\r\n          className=\"mt-6 w-full relative group overflow-hidden rounded-full p-[1px]\"\r\n        >\r\n          <div className=\"absolute inset-0 bg-gradient-to-r from-orange-500 via-red-500 to-pink-600 animate-gradient\" />\r\n          <div className=\"relative bg-black/20 backdrop-blur-sm hover:bg-white/10 text-white font-black text-xl py-3 rounded-full transition-all flex items-center justify-center gap-2 shadow-[0_0_20px_rgba(249,115,22,0.6)] group-hover:shadow-[0_0_30px_rgba(249,115,22,0.8)] border border-white/20\">\r\n            <span className=\"bg-gradient-to-r from-orange-200 to-white bg-clip-text text-transparent drop-shadow-[0_0_4px_rgba(255,255,255,0.8)]\">\r\n              Áô∫ÁÅ´\r\n            </span>\r\n            <span className=\"text-xs font-normal text-white/70 tracking-widest\">\r\n              IGNITE\r\n            </span>\r\n          </div>\r\n        </button>\r\n      </div>\r\n\r\n      {/* User Profile Mini-Card at Bottom */}\r\n\r\n      {user ? (\r\n        <Link\r\n          href=\"/sns?tab=settings\"\r\n          className=\"mb-4 flex items-center gap-3 p-3 rounded-full hover:bg-white/10 cursor-pointer transition-colors border border-transparent hover:border-white/10\"\r\n        >\r\n          {profile?.photoURL ? (\r\n            <img\r\n              src={profile.photoURL}\r\n              alt={profile.displayName}\r\n              className=\"w-10 h-10 rounded-full object-cover shadow-[0_0_10px_rgba(59,130,246,0.5)]\"\r\n            />\r\n          ) : (\r\n            <div\r\n              className={`w-10 h-10 rounded-full bg-gradient-to-tr ${\r\n                profile?.avatarGradient || \"from-blue-500 to-purple-600\"\r\n              } shadow-[0_0_10px_rgba(59,130,246,0.5)]`}\r\n            />\r\n          )}\r\n\r\n          <div className=\"flex-1 overflow-hidden\">\r\n            <p className=\"font-bold truncate text-white\">\r\n              {profile?.displayName || \"Guest\"}\r\n            </p>\r\n            <p className=\"text-white/50 text-sm truncate\">\r\n              @{user.uid.slice(0, 8)}...\r\n            </p>\r\n          </div>\r\n          <MoreHorizontal size={18} className=\"text-white/50\" />\r\n        </Link>\r\n      ) : (\r\n        <div className=\"mb-4 flex items-center gap-3 p-3\">\r\n          <div className=\"w-10 h-10 rounded-full bg-white/10\" />\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-white/50 text-sm\">Guest User</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\SocialTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPendingPosts' is assigned a value but never used.","line":40,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":20}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'hideNegative'. Either include it or remove the dependency array.","line":81,"column":6,"nodeType":"ArrayExpression","endLine":81,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [hideNegative, newPostEvent]","fix":{"range":[2732,2746],"text":"[hideNegative, newPostEvent]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { PostCard, PostData } from \"./PostCard\";\r\nimport { FireworksOverlay } from \"./FireworksOverlay\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { deleteDoc, doc, collection, query, orderBy, limit, onSnapshot, where, Timestamp } from \"firebase/firestore\";\r\nimport {\r\n  DndContext,\r\n  DragEndEvent,\r\n  DragStartEvent,\r\n  DragOverlay,\r\n  MouseSensor,\r\n  TouchSensor,\r\n  useSensor,\r\n  useSensors,\r\n} from \"@dnd-kit/core\";\r\nimport { Search } from \"lucide-react\";\r\nimport { TrashBin } from \"./TrashBin\";\r\nimport { DraggablePostCard } from \"./DraggablePostCard\";\r\nimport { useAuth } from \"@/hooks/useAuth\";\r\nimport { useSocialPosts } from \"@/hooks/useSocialPosts\";\r\n\r\nexport function SocialTab({\r\n  tab = \"everyone\",\r\n  onPendingPostsChange,\r\n  soundEnabled = false,\r\n}: {\r\n  tab?: \"everyone\" | \"solo\";\r\n  onPendingPostsChange?: (pendingPosts: PostData[]) => void;\r\n  soundEnabled?: boolean;\r\n}) {\r\n  const { user } = useAuth();\r\n  // Refactored to use custom hook\r\n  const {\r\n    posts,\r\n    setPosts,\r\n    pendingPosts,\r\n    setPendingPosts,\r\n    ready,\r\n    newPostEvent,\r\n    deletePostAssets,\r\n  } = useSocialPosts({ tab, user });\r\n\r\n  const [fireworksQueue, setFireworksQueue] = useState<(string | null)[]>([]);\r\n  const [fireworksSentiment, setFireworksSentiment] = useState<string | null>(\r\n    null\r\n  );\r\n  const [fireworksTrigger, setFireworksTrigger] = useState(0);\r\n  const [fireworksProcessing, setFireworksProcessing] = useState(false);\r\n  const fireworksTimerRef = useRef<number | null>(null);\r\n  const fireworksQueueTimerRef = useRef<number | null>(null);\r\n\r\n  const [hideNegative, setHideNegative] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkSetting = () => {\r\n      setHideNegative(localStorage.getItem(\"hanabi_hide_negative\") === \"true\");\r\n    };\r\n    checkSetting();\r\n\r\n    const handleStorageChange = () => checkSetting();\r\n    window.addEventListener(\"storage\", handleStorageChange);\r\n    return () => window.removeEventListener(\"storage\", handleStorageChange);\r\n  }, []);\r\n\r\n  type FireworksEventDetail = { sentiments?: (string | null)[] };\r\n  type FireworksCustomEvent = CustomEvent<FireworksEventDetail>;\r\n\r\n  // Enqueue sentiments from new post events\r\n  useEffect(() => {\r\n    if (newPostEvent?.sentiments?.length) {\r\n      // Filter out negative fireworks if hidden\r\n      const filtered = hideNegative\r\n        ? newPostEvent.sentiments.filter((s) => s !== \"negative\")\r\n        : newPostEvent.sentiments;\r\n      setFireworksQueue((prev) => [...prev, ...filtered]);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [newPostEvent]);\r\n\r\n  const queueFireworks = useCallback((label: string | null, count = 1) => {\r\n    if (count <= 0) return;\r\n    const sentiments = Array.from({ length: count }, () => label);\r\n    setFireworksQueue((prev) => [...prev, ...sentiments]);\r\n  }, []);\r\n\r\n  // Listen for global fireworks requests (e.g., clicks on pending posts outside this component)\r\n  useEffect(() => {\r\n    const handler = (e: FireworksCustomEvent) => {\r\n      const sentiments = e.detail?.sentiments;\r\n      if (!sentiments?.length) return;\r\n      setFireworksQueue((prev) => [...prev, ...sentiments]);\r\n    };\r\n    const listener: EventListener = (e) => handler(e as FireworksCustomEvent);\r\n    window.addEventListener(\"hanabi-fireworks\", listener);\r\n    return () => window.removeEventListener(\"hanabi-fireworks\", listener);\r\n  }, []);\r\n\r\n  // Real-time listener for fireworks events from Firestore\r\n  useEffect(() => {\r\n    // Listen to fireworks events created in the last 10 seconds\r\n    const tenSecondsAgo = Timestamp.fromMillis(Date.now() - 10000);\r\n    const fireworksQuery = query(\r\n      collection(db, \"fireworks\"),\r\n      where(\"timestamp\", \">=\", tenSecondsAgo),\r\n      orderBy(\"timestamp\", \"desc\"),\r\n      limit(50)\r\n    );\r\n\r\n    const unsubscribe = onSnapshot(fireworksQuery, (snapshot) => {\r\n      snapshot.docChanges().forEach((change) => {\r\n        if (change.type === \"added\") {\r\n          const data = change.doc.data();\r\n          const sentiment = data.sentiment as string | null;\r\n          const count = (data.count as number) || 3;\r\n\r\n          // Queue fireworks for this event\r\n          queueFireworks(sentiment, count);\r\n\r\n          // Delete the event after 5 seconds to keep collection clean\r\n          setTimeout(async () => {\r\n            try {\r\n              await deleteDoc(doc(db, \"fireworks\", change.doc.id));\r\n            } catch (err) {\r\n              console.warn(\"Failed to cleanup fireworks event:\", err);\r\n            }\r\n          }, 5000);\r\n        }\r\n      });\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [queueFireworks]);\r\n\r\n  // Dequeue one sentiment at a time and trigger fireworks\r\n  useEffect(() => {\r\n    if (fireworksProcessing) return;\r\n    if (!fireworksQueue.length) return;\r\n\r\n    // Defer state updates out of the effect body to avoid cascading render warnings\r\n    fireworksQueueTimerRef.current = window.setTimeout(() => {\r\n      const [next, ...rest] = fireworksQueue;\r\n      setFireworksSentiment(next ?? null);\r\n      setFireworksQueue(rest);\r\n      setFireworksTrigger((prev) => prev + 1);\r\n      setFireworksProcessing(true);\r\n\r\n      const delay = 80 + Math.random() * 120; // quick stagger, but not simultaneous\r\n      fireworksTimerRef.current = window.setTimeout(() => {\r\n        setFireworksProcessing(false);\r\n        fireworksTimerRef.current = null;\r\n      }, delay);\r\n    }, 0);\r\n  }, [fireworksProcessing, fireworksQueue]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (fireworksQueueTimerRef.current) {\r\n        window.clearTimeout(fireworksQueueTimerRef.current);\r\n      }\r\n      if (fireworksTimerRef.current) {\r\n        window.clearTimeout(fireworksTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Clean cleanedRef ... actually this logic is inside the hook now but we used it for one-off deletes.\r\n  // The hook handles the expiration deletes.\r\n\r\n  // Logic for manual delete drag-drop\r\n  const [activeId, setActiveId] = useState<string | null>(null);\r\n  const [dropTrigger, setDropTrigger] = useState(0);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  // hideNegative moved to top\r\n\r\n  const sensors = useSensors(\r\n    useSensor(MouseSensor, {\r\n      activationConstraint: {\r\n        distance: 10,\r\n      },\r\n    }),\r\n    useSensor(TouchSensor, {\r\n      activationConstraint: {\r\n        delay: 250, // 0.8Áßí„ÅÆÈï∑Êäº„Åó„Åß„Éâ„É©„ÉÉ„Ç∞ÈñãÂßã\r\n        tolerance: 20, // 20px‰ª•ÂÜÖ„ÅÆÁßªÂãï„ÅØË®±ÂÆπÔºà„Çπ„ÇØ„É≠„Éº„É´ÂèØËÉΩÔºâ\r\n      },\r\n    })\r\n  );\r\n\r\n  // Synchronize local pending posts with parent (CommunityPage)\r\n  useEffect(() => {\r\n    if (onPendingPostsChange) {\r\n      const filtered = hideNegative\r\n        ? pendingPosts.filter((p) => p.sentiment?.label !== \"negative\")\r\n        : pendingPosts;\r\n      onPendingPostsChange(filtered);\r\n    }\r\n  }, [pendingPosts, onPendingPostsChange, hideNegative]);\r\n\r\n  const handleDragStart = (event: DragStartEvent) => {\r\n    setActiveId(event.active.id as string);\r\n  };\r\n\r\n  const handleDragEnd = async (event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n    setActiveId(null);\r\n\r\n    if (over && over.id === \"trash-bin\") {\r\n      const postId = active.id as string;\r\n      const targetPost = posts.find((p) => p.id === postId);\r\n\r\n      setDropTrigger(Date.now());\r\n      setPosts((prev) => prev.filter((p) => p.id !== postId));\r\n\r\n      try {\r\n        await deletePostAssets(targetPost);\r\n        await deleteDoc(doc(db, \"posts\", postId));\r\n        console.log(\"Deleted post\", postId);\r\n      } catch (e) {\r\n        console.error(\"Error deleting post\", e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const activePost = posts.find((p) => p.id === activeId);\r\n\r\n  return (\r\n    <DndContext\r\n      sensors={sensors}\r\n      onDragStart={handleDragStart}\r\n      onDragEnd={handleDragEnd}\r\n    >\r\n      <div className=\"w-full relative animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n        {/* Mobile \"Center\" Shim - if on mobile, show pending posts here at top */}\r\n        <div className=\"lg:hidden mb-6 flex flex-col gap-4\" data-pending-stack>\r\n          {pendingPosts\r\n            .filter((p) => {\r\n              if (hideNegative && p.sentiment?.label === \"negative\")\r\n                return false;\r\n              return true;\r\n            })\r\n            .map((p) => (\r\n              <div\r\n                key={p.id}\r\n                className=\"animate-in zoom-in-50 fade-in duration-700 border-b border-white/10 pb-6 cursor-pointer\"\r\n                onClick={() => {\r\n                  const count = 3 + Math.floor(Math.random() * 3); // 3-5Áô∫\r\n                  queueFireworks(p.sentiment?.label ?? null, count);\r\n                }}\r\n              >\r\n                <PostCard post={p} onLoginRequired={() => {}} />\r\n              </div>\r\n            ))}\r\n        </div>\r\n\r\n        {/* Search Bar */}\r\n        <div className=\"mb-4 sm:mb-6 relative\">\r\n          <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-white/40\">\r\n            <Search size={18} className=\"sm:block hidden\" />\r\n            <Search size={16} className=\"sm:hidden\" />\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            placeholder=\"ÁÅ´Á®Æ„ÇíÊé¢„Åô...\"\r\n            className=\"w-full bg-white/5 border border-white/10 rounded-full py-2 pl-10 pr-4 text-xs sm:text-sm text-white placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-orange-500/50 transition-all hover:bg-white/10\"\r\n          />\r\n        </div>\r\n\r\n        {/* List Container with overflow-anchor: none to prevent browser scroll jumping */}\r\n        <motion.div\r\n          layout\r\n          style={{ overflowAnchor: \"none\" }}\r\n          className=\"flex flex-col gap-3 sm:gap-4 pb-24\"\r\n          data-feed-root\r\n        >\r\n          {!ready && (\r\n            <div className=\"text-white/50 text-xs sm:text-sm\">\r\n              Loading posts...\r\n            </div>\r\n          )}\r\n          <AnimatePresence mode=\"popLayout\" initial={false}>\r\n            {posts\r\n              .filter((post) => {\r\n                // Hide pending posts from timeline\r\n                if (pendingPosts.some((p) => p.id === post.id)) return false;\r\n\r\n                // Hide negative if setting enabled\r\n                if (hideNegative && post.sentiment?.label === \"negative\") {\r\n                  return false;\r\n                }\r\n\r\n                if (!searchQuery.trim()) return true;\r\n                const q = searchQuery.toLowerCase();\r\n                return (\r\n                  post.content.toLowerCase().includes(q) ||\r\n                  post.author.toLowerCase().includes(q) ||\r\n                  post.attachment?.name.toLowerCase().includes(q)\r\n                );\r\n              })\r\n              .map((post) => (\r\n                <motion.div\r\n                  key={post.id}\r\n                  layout\r\n                  initial={{ opacity: 0, scale: 0.9, y: 10 }}\r\n                  animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                  exit={{ opacity: 0, scale: 0.9, y: -10 }}\r\n                  transition={{\r\n                    layout: { duration: 0.3, ease: \"easeOut\" },\r\n                    opacity: { duration: 0.2 },\r\n                  }}\r\n                >\r\n                  <DraggablePostCard\r\n                    post={post}\r\n                    isOwner={user?.uid === post.authorId}\r\n                    onLoginRequired={() => {}}\r\n                    // Removed conflicting CSS animations as Framer Motion handles entry/exit\r\n                    className=\"\"\r\n                  />\r\n                </motion.div>\r\n              ))}\r\n          </AnimatePresence>\r\n        </motion.div>\r\n\r\n        <TrashBin dropTrigger={dropTrigger} soundEnabled={soundEnabled} />\r\n\r\n        <DragOverlay>\r\n          {activePost ? (\r\n            <div className=\"opacity-90 scale-105 pointer-events-none\">\r\n              <PostCard post={activePost} onLoginRequired={() => {}} />\r\n            </div>\r\n          ) : null}\r\n        </DragOverlay>\r\n        <FireworksOverlay\r\n          trigger={fireworksTrigger}\r\n          sentimentLabel={fireworksSentiment}\r\n          sound={\r\n            soundEnabled\r\n              ? {\r\n                  enabled: true,\r\n                  files: [\"/sounds/fireworks.mp3\"],\r\n                  volume: { min: 90, max: 100 },\r\n                }\r\n              : { enabled: false }\r\n          }\r\n        />\r\n      </div>\r\n    </DndContext>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\TrashBin.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[611,614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[611,614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'playSound'. Either include it or remove the dependency array.","line":72,"column":6,"nodeType":"ArrayExpression","endLine":72,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [dropTrigger, playSound]","fix":{"range":[2414,2427],"text":"[dropTrigger, playSound]"}}]}],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\TrashBin.tsx:68:7\n  66 |       playSound();\n  67 |       // eslint-disable-next-line react-hooks/set-state-in-effect\n> 68 |       setSmoke(true);\n     |       ^^^^^^^^ Avoid calling setState() directly within an effect\n  69 |       const timer = setTimeout(() => setSmoke(false), 2000); // 2s smoke duration\n  70 |       return () => clearTimeout(timer);\n  71 |     }","line":68,"column":7,"nodeType":null,"endLine":68,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDroppable } from \"@dnd-kit/core\";\r\n\r\ninterface TrashBinProps {\r\n  dropTrigger?: number; // Timestamp or incrementing ID to trigger effect\r\n  soundEnabled?: boolean;\r\n}\r\n\r\nexport function TrashBin({ dropTrigger, soundEnabled = true }: TrashBinProps) {\r\n  const { setNodeRef, isOver } = useDroppable({\r\n    id: \"trash-bin\",\r\n  });\r\n  const [smoke, setSmoke] = useState<boolean>(false);\r\n\r\n  const playSound = () => {\r\n    if (!soundEnabled) return;\r\n    try {\r\n      const AudioContext =\r\n        window.AudioContext || (window as any).webkitAudioContext;\r\n      if (!AudioContext) return;\r\n\r\n      const ctx = new AudioContext();\r\n      const t = ctx.currentTime;\r\n      const duration = 1.0; // Shorter, sharper sound\r\n\r\n      // Noise buffer for \"hiss\"\r\n      const bufferSize = ctx.sampleRate * duration;\r\n      const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\r\n      const data = buffer.getChannelData(0);\r\n      for (let i = 0; i < bufferSize; i++) {\r\n        // High frequency noise preferred\r\n        data[i] = Math.random() * 2 - 1;\r\n      }\r\n\r\n      const noise = ctx.createBufferSource();\r\n      noise.buffer = buffer;\r\n\r\n      // Filter: Sharper hiss (High frequency start)\r\n      const filter = ctx.createBiquadFilter();\r\n      filter.type = \"bandpass\"; // Changed to bandpass for that specific \"steam\" sound\r\n      filter.Q.value = 1;\r\n      filter.frequency.setValueAtTime(3000, t); // Start high (hiss)\r\n      filter.frequency.exponentialRampToValueAtTime(100, t + duration); // Drop fast\r\n\r\n      // Gain: Sharp attack, sizzling tail\r\n      const gain = ctx.createGain();\r\n      gain.gain.setValueAtTime(0, t);\r\n      gain.gain.linearRampToValueAtTime(0.2, t + 0.05); // Attack\r\n      gain.gain.exponentialRampToValueAtTime(0.005, t + duration); // Decay\r\n\r\n      noise.connect(filter);\r\n      filter.connect(gain);\r\n      gain.connect(ctx.destination);\r\n\r\n      noise.start();\r\n      noise.stop(t + duration);\r\n    } catch (e) {\r\n      console.error(\"Audio play failed\", e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (dropTrigger && dropTrigger > 0) {\r\n      playSound();\r\n      // eslint-disable-next-line react-hooks/set-state-in-effect\r\n      setSmoke(true);\r\n      const timer = setTimeout(() => setSmoke(false), 2000); // 2s smoke duration\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [dropTrigger]);\r\n\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      className={`fixed bottom-8 right-8 z-50 transition-all duration-300 ${\r\n        isOver ? \"scale-110\" : \"scale-100\"\r\n      }`}\r\n    >\r\n      <style>{`\r\n        @keyframes flashy-smoke {\r\n          0% { transform: translate(-50%, 0) scale(0.5); opacity: 0; }\r\n          10% { opacity: 0.8; }\r\n          100% { transform: translate(-50%, -150px) scale(3); opacity: 0; }\r\n        }\r\n        .animate-flashy-smoke {\r\n          animation: flashy-smoke 1.2s ease-out forwards;\r\n        }\r\n      `}</style>\r\n\r\n      {/* Intense Smoke Particles */}\r\n      {smoke && (\r\n        <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 w-40 h-60 pointer-events-none\">\r\n          {[...Array(12)].map((_, i) => (\r\n            <div\r\n              key={i}\r\n              className=\"absolute bottom-0 left-1/2 w-10 h-10 rounded-full bg-white/60 blur-xl animate-flashy-smoke\"\r\n              style={{\r\n                animationDelay: `${i * 0.05}s`,\r\n                // Wider spread for flashiness\r\n                transform: `translateX(${(((i * 37) % 20) - 10) * 8}px)`,\r\n                backgroundColor:\r\n                  i % 2 === 0\r\n                    ? \"rgba(255,255,255,0.6)\"\r\n                    : \"rgba(200,220,255,0.4)\", // White and slight blue smoke\r\n              }}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Water Bucket Visual */}\r\n      <div className=\"relative group\">\r\n        {/* Bucket Handle (Visual) */}\r\n        <div className=\"absolute -top-6 left-1/2 -translate-x-1/2 w-16 h-12 border-t-4 border-l-2 border-r-2 border-zinc-400 rounded-t-full z-10 opacity-80\" />\r\n\r\n        {/* Bucket Body */}\r\n        <div\r\n          className={`relative w-20 h-20 bg-blue-900/40 backdrop-blur-md border-[3px] border-blue-400/50 rounded-b-xl rounded-t-sm shadow-[0_10px_30px_rgba(0,0,0,0.5)] overflow-hidden transition-colors ${\r\n            isOver\r\n              ? \"bg-blue-800/60 shadow-[0_0_30px_rgba(59,130,246,0.5)] border-blue-400\"\r\n              : \"\"\r\n          }`}\r\n        >\r\n          {/* Water Level */}\r\n          <div\r\n            className={`absolute bottom-0 left-0 w-full bg-blue-500/60 transition-all duration-500 ${\r\n              isOver ? \"h-full animate-pulse\" : \"h-3/4\"\r\n            }`}\r\n          >\r\n            <div className=\"w-full h-full bg-gradient-to-t from-blue-700 to-transparent opacity-50\" />\r\n          </div>\r\n\r\n          {/* Surface Reflection */}\r\n          <div className=\"absolute top-2 left-2 w-full h-4 bg-white/10 skew-y-6 rounded-full blur-sm\" />\r\n\r\n          {/* Icon or Text */}\r\n          <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n            {!isOver && <span className=\"text-2xl opacity-50\">üíß</span>}\r\n            {isOver && <span className=\"text-3xl animate-bounce\">üî•</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {isOver && (\r\n        <p className=\"absolute -top-8 left-1/2 -translate-x-1/2 text-blue-300 font-bold whitespace-nowrap drop-shadow-md bg-black/60 px-2 py-1 rounded text-xs border border-blue-500/30\">\r\n          Ê∞¥„Å´ÂÖ•„Çå„Çã (Douse)\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\Social\\Widgets.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreHorizontal' is defined but never used.","line":4,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Search, MoreHorizontal } from \"lucide-react\";\r\n\r\nexport function Widgets() {\r\n  return (\r\n    <div className=\"hidden xl:flex flex-col gap-4 w-[350px] shrink-0 pl-8 py-4 h-screen sticky top-0 overflow-y-auto\">\r\n      {/* Search Bar */}\r\n      <div className=\"sticky top-0 bg-black pb-2 z-10\">\r\n        <div className=\"relative group\">\r\n          <div className=\"absolute left-4 top-1/2 -translate-y-1/2 text-white/50 group-focus-within:text-orange-500\">\r\n            <Search size={20} />\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Ê§úÁ¥¢\"\r\n            className=\"w-full bg-[#202327] outline-none border border-transparent focus:border-orange-500/50 focus:bg-black text-white pl-12 pr-4 py-3 rounded-full transition-all\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Premium Subscribe Box */}\r\n      <div className=\"bg-[#16181c] rounded-2xl p-4 flex flex-col gap-2\">\r\n        <h2 className=\"font-bold text-xl\">„Éó„É¨„Éü„Ç¢„É†„Å´„Çµ„Éñ„Çπ„ÇØ„É©„Ç§„Éñ</h2>\r\n        <p className=\"text-sm text-white/80\">\r\n          „Çµ„Éñ„Çπ„ÇØ„É©„Ç§„Éñ„Åó„Å¶Êñ∞Ê©üËÉΩ„ÇíÂà©Áî®„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇË≥áÊ†º„ÇíÊ∫Ä„Åü„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÄÅÂèéÁõäÈÖçÂàÜ„ÇíÂèó„ÅëÂèñ„Çå„Åæ„Åô„ÄÇ\r\n        </p>\r\n        <button className=\"bg-gradient-to-r from-orange-500 to-red-600 text-white font-bold py-2 px-4 rounded-full self-start hover:from-orange-400 hover:to-red-500 transition-all shadow-lg hover:shadow-orange-500/25\">\r\n          „Çµ„Éñ„Çπ„ÇØ„É©„Ç§„Éñ„Åô„Çã\r\n        </button>\r\n      </div>\r\n\r\n      {/* What's Happening */}\r\n      <div className=\"bg-[#16181c] rounded-2xl pt-4\">\r\n        <h2 className=\"font-bold text-xl px-4 mb-4\">Êú¨Êó•„ÅÆ„Éã„É•„Éº„Çπ</h2>\r\n\r\n        {[\r\n          {\r\n            category: \"„Ç§„Éô„É≥„Éà ¬∑ „É©„Ç§„Éñ\",\r\n            title: \"M-1„Ç∞„É©„É≥„Éó„É™2025ÂØ©ÊüªÂì°„Å´ÂæåËó§&ÈßíÂ†¥„ÅåÂàùÂèÇÂä†\",\r\n            meta: \"2ÊôÇÈñìÂâç ¬∑ „Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É°„É≥„Éà ¬∑ 14,459‰ª∂„ÅÆ„Éù„Çπ„Éà\",\r\n            img: \"bg-red-500\",\r\n          },\r\n          {\r\n            category: \"„É©„Ç§„Éñ ¬∑ „Éà„É¨„É≥„Éâ\",\r\n            title:\r\n              \"„Äå„Ç¢„Ç§„Éû„Çπ„Äç20Âë®Âπ¥„É©„Ç§„Éñ Day2„ÄÅ‰∫¨„Çª„É©„Éâ„Éº„É†„ÅßÂÖ®„Ç∑„É™„Éº„Ç∫„Ç≠„É£„Çπ„ÉàÈõÜÁµê\",\r\n            meta: \"2Êó•Ââç ¬∑ „Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É°„É≥„Éà ¬∑ 27,013‰ª∂„ÅÆ„Éù„Çπ„Éà\",\r\n            img: \"bg-blue-500\",\r\n          },\r\n          {\r\n            category: \"„Çπ„Éù„Éº„ÉÑ ¬∑ „Éà„É¨„É≥„Éâ\",\r\n            title: \"„É¥„Ç£„ÉÉ„Çª„É´Á•ûÊà∏„ÄÅ„Çπ„Ç≠„ÉÉ„ÉôÊ∞è„Çí2026„Ç∑„Éº„Ç∫„É≥Êñ∞Áõ£Áù£„Å´Ëøé„Åà„Çã\",\r\n            meta: \"1ÊôÇÈñìÂâç ¬∑ „Çπ„Éù„Éº„ÉÑ ¬∑ 3,879‰ª∂„ÅÆ„Éù„Çπ„Éà\",\r\n            img: \"bg-green-500\",\r\n          },\r\n        ].map((item, i) => (\r\n          <div\r\n            key={i}\r\n            className=\"px-4 py-3 hover:bg-white/5 cursor-pointer transition-colors flex justify-between gap-2\"\r\n          >\r\n            <div className=\"flex flex-col gap-0.5\">\r\n              <span className=\"text-xs text-white/50\">{item.category}</span>\r\n              <span className=\"font-bold text-sm leading-tight\">\r\n                {item.title}\r\n              </span>\r\n              <span className=\"text-xs text-white/50\">{item.meta}</span>\r\n            </div>\r\n            <div className={`w-16 h-16 rounded-xl ${item.img} flex-shrink-0`} />\r\n          </div>\r\n        ))}\r\n        <div className=\"p-4 text-orange-400 text-sm hover:bg-white/5 cursor-pointer rounded-b-2xl\">\r\n          „ÇÇ„Å£„Å®Ë¶ã„Çã\r\n        </div>\r\n      </div>\r\n\r\n      {/* Who to Follow */}\r\n      <div className=\"bg-[#16181c] rounded-2xl pt-4\">\r\n        <h2 className=\"font-bold text-xl px-4 mb-4\">„Åä„Åô„Åô„ÇÅ„É¶„Éº„Ç∂„Éº</h2>\r\n        {[1, 2, 3].map((i) => (\r\n          <div\r\n            key={i}\r\n            className=\"px-4 py-3 hover:bg-white/5 cursor-pointer flex items-center justify-between\"\r\n          >\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 rounded-full bg-white/20\" />\r\n              <div className=\"flex flex-col\">\r\n                <span className=\"font-bold hover:underline\">User {i}</span>\r\n                <span className=\"text-white/50 text-sm\">@user_{i}</span>\r\n              </div>\r\n            </div>\r\n            <button className=\"bg-white text-black font-bold text-sm py-1.5 px-4 rounded-full hover:bg-white/90\">\r\n              „Éï„Ç©„É≠„Éº\r\n            </button>\r\n          </div>\r\n        ))}\r\n        <div className=\"p-4 text-orange-400 text-sm hover:bg-white/5 cursor-pointer rounded-b-2xl\">\r\n          „ÇÇ„Å£„Å®Ë¶ã„Çã\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\components\\UploadMode.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\hooks\\useAuth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\hooks\\useFireParticles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\hooks\\useProfile.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\hooks\\useProfile.ts:22:7\n  20 |     if (!user) {\n  21 |       // eslint-disable-next-line react-hooks/set-state-in-effect\n> 22 |       setProfile(null);\n     |       ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  23 |\n  24 |       setLoading(false);\n  25 |       return;","line":22,"column":7,"nodeType":null,"endLine":22,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\hooks\\useSocialPosts.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3131,3134],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3131,3134],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":113,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3427,3430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3427,3430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":164,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5335,5338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5335,5338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5617,5620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5617,5620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\beco\\vscode-workspace\\webapp_practice\\pre-16\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]